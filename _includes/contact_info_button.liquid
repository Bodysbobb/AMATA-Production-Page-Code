{% assign position = include.position | default: page.contact_position | default: "right" %}
{% assign theme = include.theme | default: page.contact_theme | default: "default-theme" %}
{% assign current_lang = page.lang | default: site.lang | default: 'en' %}
{% assign main_animation = include.main_animation | default: page.main_animation | default: "false" %}
{% assign wave_animation = include.wave_animation | default: page.wave_animation | default: "false" %}

{%- assign call = include.call | default: page.contact_call -%}
{%- assign email = include.email | default: page.contact_email -%}
{%- assign location_url = include.location_url | default: page.contact_location_url -%}
{%- assign chat_url = include.chat_url | default: page.contact_chat_url -%}
{%- assign messenger = include.messenger | default: page.contact_messenger -%}
{%- assign whatsapp = include.whatsapp | default: page.contact_whatsapp -%}
{%- assign line_url = include.line_url | default: page.contact_line_url -%}
{%- assign digitalcard_url = include.digitalcard_url | default: page.contact_digitalcard_url -%}

{% if current_lang == "th" %}
  {% assign contact_title = include.contact_title | default: page.contact_title | default: "ติดต่อเรา" %}
  {% assign call_label = include.call_label | default: page.call_label | default: "โทร" %}
  {% assign line_label = include.line_label | default: page.line_label | default: "ไลน์" %}
  {% assign messenger_label = include.messenger_label | default: page.messenger_label | default: "Messenger" %}
  {% assign smart_card_label = include.smart_card_label | default: page.smart_card_label | default: "สมาร์ทการ์ด" %}
  {% assign location_label = include.location_label | default: page.location_label | default: "ที่อยู่" %}
  {% assign email_label = include.email_label | default: page.email_label | default: "อีเมล" %}
{% else %}
  {% assign contact_title = include.contact_title | default: page.contact_title | default: "Contact Us" %}
  {% assign call_label = include.call_label | default: page.call_label | default: "Call" %}
  {% assign line_label = include.line_label | default: page.line_label | default: "Line" %}
  {% assign messenger_label = include.messenger_label | default: page.messenger_label | default: "Messenger" %}
  {% assign smart_card_label = include.smart_card_label | default: page.smart_card_label | default: "Smart Card" %}
  {% assign location_label = include.location_label | default: page.location_label | default: "Location" %}
  {% assign email_label = include.email_label | default: page.email_label | default: "Email" %}
{% endif %}

{%- assign contact_order = include.contact_order | default: page.contact_order -%}
{% unless contact_order %}
  {% assign contact_order = "email,location,messenger,line,call,digitalcard" | split: "," %}
{% endunless %}

<div class="floating-contact-container {{ theme }}" 
     data-position="{{ position }}"
     data-main-animation="{{ main_animation }}"
     data-wave-animation="{{ wave_animation }}">
  <div class="contact-options">
    {% for item in contact_order %}
      {% case item %}
        
        {% when "email" %}
          {% if email %}
          <a href="mailto:{{ email }}" class="contact-button email-button">
            {% if position == "right" %}
            <div class="contact-button-label">{{ email_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-solid fa-envelope"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-solid fa-envelope"></i>
            </div>
            <div class="contact-button-label">{{ email_label }}</div>
            {% endif %}
          </a>
          {% endif %}
        
        {% when "location" %}
          {% if location_url %}
          <a href="{{ location_url }}" class="contact-button location-button" target="_blank" rel="external nofollow noopener">
            {% if position == "right" %}
            <div class="contact-button-label">{{ location_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-solid fa-location-dot"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-solid fa-location-dot"></i>
            </div>
            <div class="contact-button-label">{{ location_label }}</div>
            {% endif %}
          </a>
          {% endif %}
        
        {% when "messenger" %}
          {% if messenger %}
          <a href="https://m.me/{{ messenger }}" class="contact-button messenger-button" target="_blank" rel="external nofollow noopener">
            {% if position == "right" %}
            <div class="contact-button-label">{{ messenger_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-brands fa-facebook-messenger"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-brands fa-facebook-messenger"></i>
            </div>
            <div class="contact-button-label">{{ messenger_label }}</div>
            {% endif %}
          </a>
          {% endif %}
        
        {% when "line" %}
          {% if line_url %}
          <a href="{{ line_url }}" class="contact-button line-account-button" target="_blank" rel="external nofollow noopener">
            {% if position == "right" %}
            <div class="contact-button-label">{{ line_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-brands fa-line"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-brands fa-line"></i>
            </div>
            <div class="contact-button-label">{{ line_label }}</div>
            {% endif %}
          </a>
          {% endif %}
        
        {% when "call" %}
          {% if call %}
          <a href="tel:{{ call | remove: ' ' | remove: '-' | remove: '(' | remove: ')' }}" class="contact-button call-button">
            {% if position == "right" %}
            <div class="contact-button-label">{{ call_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-solid fa-phone"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-solid fa-phone"></i>
            </div>
            <div class="contact-button-label">{{ call_label }}</div>
            {% endif %}
          </a>
          {% endif %}
        
        {% when "digitalcard" %}
          {% if digitalcard_url %}
          <a href="{{ digitalcard_url }}" class="contact-button digitalcard-button" target="_blank" rel="external nofollow noopener">
            {% if position == "right" %}
            <div class="contact-button-label">{{ smart_card_label }}</div>
            <div class="contact-button-icon">
              <i class="fa-solid fa-id-card"></i>
            </div>
            {% else %}
            <div class="contact-button-icon">
              <i class="fa-solid fa-id-card"></i>
            </div>
            <div class="contact-button-label">{{ smart_card_label }}</div>
            {% endif %}
          </a>
          {% endif %}
          
      {% endcase %}
    {% endfor %}
  </div>

  <div class="contact-toggle-wrapper">
    <div class="contact-toggle-bubble">{{ contact_title }}</div>
      <button class="contact-toggle">
        <svg class="fa-comment" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="24" height="24">
          <path fill="currentColor" d="M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"/>
        </svg>
        <svg class="fa-times" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" width="24" height="24">
          <path fill="currentColor" d="M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"/>
        </svg>
      </button>
  </div>
</div>